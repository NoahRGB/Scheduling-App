{"ast":null,"code":"var _jsxFileName = \"/Users/noahcox/Code/React/Scheduling-App/frontend/src/Calendar.js\",\n    _s = $RefreshSig$();\n\nimport Header from \"./Header\";\nimport BlockContainer from \"./BlockContainer\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { AppContext } from \"./Context\";\nimport { useHistory } from \"react-router\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Calendar = ({\n  todayInfo\n}) => {\n  _s();\n\n  const [blocks, setBlocks] = useState([]);\n  const monthStringConversions = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n  const monthDayConversions = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n  const ctx = useContext(AppContext);\n  const history = useHistory();\n\n  const populateDateInfo = async () => {\n    //sets date info state (for header)\n    const now = new Date();\n    const day = now.getDate();\n    const month = now.getMonth();\n    const year = now.getFullYear();\n    ctx.setSessionStorage(\"dateInfo\", JSON.stringify({\n      day,\n      month,\n      year\n    })); //sets date block state (for calendar display)\n\n    let newDateBlocks = [];\n\n    for (let i = 1; i <= monthDayConversions[month]; i++) {\n      let activities = await fetchActivities(`${month + 1}/${i}/${year}`);\n      newDateBlocks.push({\n        id: i,\n        date: `${i}/${month + 1}/${year}`,\n        activities,\n        isToday: i === day\n      });\n    }\n\n    setBlocks([...blocks, ...newDateBlocks]);\n  };\n\n  const fetchActivities = async date => {\n    let response = await fetch(\"http://localhost:8000/getactivities\", {\n      method: \"POST\",\n      mode: \"cors\",\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        date,\n        username: ctx.accessSessionStorage(\"username\")\n      })\n    });\n    let data = await response.json();\n    return data;\n  };\n\n  useEffect(() => {\n    populateDateInfo();\n  }, []);\n\n  if (!ctx.accessSessionStorage(\"username\")) {\n    history.push(\"/login\");\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [console.log(ctx.accessSessionStorage(\"username\")), /*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(BlockContainer, {\n      blocks: blocks\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Calendar, \"QQ988wTkYAQLWAvRX1y3gPuw9zM=\", false, function () {\n  return [useHistory];\n});\n\n_c = Calendar;\nexport default Calendar;\n\nvar _c;\n\n$RefreshReg$(_c, \"Calendar\");","map":{"version":3,"sources":["/Users/noahcox/Code/React/Scheduling-App/frontend/src/Calendar.js"],"names":["Header","BlockContainer","React","useState","useEffect","useContext","AppContext","useHistory","Calendar","todayInfo","blocks","setBlocks","monthStringConversions","monthDayConversions","ctx","history","populateDateInfo","now","Date","day","getDate","month","getMonth","year","getFullYear","setSessionStorage","JSON","stringify","newDateBlocks","i","activities","fetchActivities","push","id","date","isToday","response","fetch","method","mode","headers","body","username","accessSessionStorage","data","json","console","log"],"mappings":"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","sourcesContent":["import Header from \"./Header\";\nimport BlockContainer from \"./BlockContainer\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { AppContext } from \"./Context\";\nimport { useHistory } from \"react-router\";\n\nconst Calendar = ({ todayInfo }) => {\n    const [blocks, setBlocks] = useState([]);\n\n    const monthStringConversions = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n    const monthDayConversions = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n\n    const ctx = useContext(AppContext);\n    const history = useHistory();\n  \n    const populateDateInfo = async () => {\n        //sets date info state (for header)\n        const now = new Date();\n        const day = now.getDate();\n        const month = now.getMonth();\n        const year = now.getFullYear();\n        ctx.setSessionStorage(\"dateInfo\", JSON.stringify({day, month, year}));\n        //sets date block state (for calendar display)\n        let newDateBlocks = [];\n        for (let i = 1; i <= monthDayConversions[month]; i++) {\n            let activities = await fetchActivities(`${month+1}/${i}/${year}`);\n            newDateBlocks.push({\n            id: i,\n            date: `${i}/${month+1}/${year}`,\n            activities,\n            isToday: i === day\n            });\n        }\n        setBlocks([...blocks, ...newDateBlocks]);\n    }\n  \n    const fetchActivities = async date => {\n      let response = await fetch(\"http://localhost:8000/getactivities\", {\n        method: \"POST\",\n        mode: \"cors\",\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ \n          date, \n          username:ctx.accessSessionStorage(\"username\"), \n        })\n      });\n      let data = await response.json();\n      return data;\n    }\n  \n    useEffect(() => {\n      populateDateInfo();\n    }, []);\n\n    if (!ctx.accessSessionStorage(\"username\")) {\n      history.push(\"/login\");\n    }\n\n    return (\n        <>\n          {console.log(ctx.accessSessionStorage(\"username\"))}\n          <Header/>\n          <BlockContainer blocks={blocks}/>\n        </>\n    );\n}\n\nexport default Calendar;"]},"metadata":{},"sourceType":"module"}